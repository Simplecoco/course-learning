(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"08f7":function(e,t,a){},"0a0d":function(e,t,a){e.exports=a("e829")},"0e57":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"homework-upload"},[a("Form",{ref:"uploadForm",attrs:{model:e.uploadForm.data,rules:e.uploadForm.rule,"label-width":80}},[a("FormItem",{attrs:{label:"文件",prop:"file"}},[a("Upload",{attrs:{multiple:"",type:"drag",action:"//localhost:3000/uploadFile","on-success":e.fileSuccess,"on-error":e.fileSuccess,"on-remove":e.removeFile,"default-file-list":e.uploadForm.fileList}},[a("div",{staticStyle:{padding:"20px 0"}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),a("p",[e._v("点击或拖动上传文件")]),e._t("upload-desc")],2)])],1),a("FormItem",{attrs:{label:"标题",prop:"name"}},[a("Input",{attrs:{placeholder:"Enter your name"},model:{value:e.uploadForm.data.name,callback:function(t){e.$set(e.uploadForm.data,"name",t)},expression:"uploadForm.data.name"}})],1),a("FormItem",{attrs:{label:"描述 or 备注",prop:"desc"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"Enter something..."},model:{value:e.uploadForm.data.desc,callback:function(t){e.$set(e.uploadForm.data,"desc",t)},expression:"uploadForm.data.desc"}})],1),e.isSubmitBtn?a("FormItem",[a("Button",{attrs:{type:"success",long:""},nativeOn:{click:function(t){e.asyncOK("uploadForm")}}},[e._v("提交")])],1):e._e()],1)],1)},n=[],s=a("0a0d"),r=a.n(s),i=(a("7f7f"),{props:{isSubmitBtn:{type:Boolean,default:!0},notice:{type:String,default:"作业提交成功"},submitUrl:{type:String,required:!0}},data:function(){return{uploadForm:{data:{file:"",fileType:"",name:"",desc:""},rule:{name:[{required:!0,message:"文件名不能为空",trigger:"blur"}],desc:[{required:!1,message:"请输入描述 or 备注",trigger:"blur"},{type:"string",min:6,message:"Introduce no less than 6 words",trigger:"blur"}]},fileList:[]}}},methods:{asyncOK:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uploadForm";this.$refs[t].validate(function(t){if(t){console.log(e.uploadForm.fileList);var a=e.uploadForm.fileList.map(function(e){return{name:e.name,fileType:e.fileType,url:e.url}});e.$http({method:"post",url:e.submitUrl,data:{uri:r()(),name:e.uploadForm.data.name,content:e.uploadForm.data.desc,desc:e.uploadForm.data.desc,files:a}}).then(function(t){console.log(t),e.$Notice.success({title:e.notice,desc:"可以休息一会儿啦~"}),e.$emit("success",e.uploadForm.data),e.uploadForm.data={file:"",fileType:"",name:"",desc:""}})}else e.$Message.error("Fail!")})},removeFile:function(e,t){this.uploadForm.fileList.splice(this.uploadForm.fileList.indexOf(e),1)},fileSuccess:function(e,t,a){console.log(e,t,a),this.uploadForm.data.file=e.name,this.uploadForm.data.fileType=e.mimetype,this.uploadForm.fileList.push({name:e.name,url:e.path,fileType:e.mimetype,uid:t.uid})}}}),l=i,u=(a("b6bf"),a("2877")),c=Object(u["a"])(l,o,n,!1,null,"5b6adf84",null);c.options.__file="HomeworkUpload.vue";t["a"]=c.exports},"2f37":function(e,t,a){var o=a("63b6");o(o.S,"Date",{now:function(){return(new Date).getTime()}})},"5cb7":function(e,t,a){},"61e5":function(e,t,a){},7368:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("Layout",{attrs:{menuItems:e.menuItems,userName:this.userName}},[a("router-view")],1),a("div",{staticClass:"chat-drawer"},[a("div",{staticClass:"drawer-btn-homework-con"},[a("Tooltip",{attrs:{content:"打开作业提交"}},[a("Button",{staticClass:"drawer-btn",staticStyle:{width:"42px",height:"42px","font-size":"18px",padding:"5px"},attrs:{type:"primary",size:"large",icon:"md-cloud-upload"},on:{click:function(t){e.HomeworkDrawer.show=!0}}})],1)],1),a("div",{staticClass:"drawer-btn-con"},[a("Badge",{attrs:{count:e.drawer.unreadNum}},[a("Tooltip",{attrs:{content:"打开在线交流"}},[a("Button",{staticClass:"drawer-btn",staticStyle:{width:"45px",height:"45px"},attrs:{type:"success",shape:"circle",size:"large",icon:"logo-twitch"},on:{click:function(t){e.drawer.show=!0}}})],1)],1)],1),a("Drawer",{attrs:{title:"在线交流",width:"35",closable:!1},on:{"on-visible-change":e.resetUnreadNum},model:{value:e.drawer.show,callback:function(t){e.$set(e.drawer,"show",t)},expression:"drawer.show"}},[a("chat-card",{ref:"chat-card",on:{recieve:e.setUnreadNum}})],1),a("Drawer",{attrs:{title:"作业提交",placement:"left",width:"35",closable:!1},model:{value:e.HomeworkDrawer.show,callback:function(t){e.$set(e.HomeworkDrawer,"show",t)},expression:"HomeworkDrawer.show"}},[a("homework-upload",{attrs:{submitUrl:"/user/submitproject"},on:{success:e.submitHomeworkSuccess}})],1)],1)],1)},n=[],s=a("ebad"),r=a("6487"),i=a("0e57"),l={name:"user",components:{Layout:s["a"],ChatCard:r["a"],HomeworkUpload:i["a"]},beforeRouteLeave:function(e,t,a){console.log(t,e),"/user"===t.matched[0].path&&"/admin"===e.matched[0].path&&this.$refs["chat-card"].disconnect(),a()},data:function(){return{userName:"",menuItems:[{text:"Home",icon:"md-home",name:"user-home"},{text:"资源下载",icon:"md-cloud-download",name:"resource-download"},{text:"课程测验",icon:"md-create",name:"exam"}],drawer:{unreadNum:0,show:!1},HomeworkDrawer:{show:!1}}},mounted:function(){this.userName=this.$route.query.user},methods:{setUnreadNum:function(){this.drawer.show||this.drawer.unreadNum++},resetUnreadNum:function(e){!0===e&&0!==this.drawer.unreadNum&&(this.drawer.unreadNum=0)},submitHomeworkSuccess:function(e){this.HomeworkDrawer.show=!1}}},u=l,c=(a("abe4"),a("2877")),d=Object(c["a"])(u,o,n,!1,null,"f904374a",null);d.options.__file="index.vue";t["default"]=d.exports},"7f7f":function(e,t,a){var o=a("86cc").f,n=Function.prototype,s=/^\s*function ([^ (]*)/,r="name";r in n||a("9e1e")&&o(n,r,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},abe4:function(e,t,a){"use strict";var o=a("5cb7"),n=a.n(o);n.a},b6bf:function(e,t,a){"use strict";var o=a("08f7"),n=a.n(o);n.a},d047:function(e,t,a){"use strict";var o=a("61e5"),n=a.n(o);n.a},e829:function(e,t,a){a("2f37"),e.exports=a("584a").Date.now},ebad:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout"},[a("Layout",[a("Sider",{ref:"side1",attrs:{collapsible:"","collapsed-width":78},model:{value:e.isCollapsed,callback:function(t){e.isCollapsed=t},expression:"isCollapsed"}},[a("div",{staticClass:"avatar-con"},[a("Avatar",{staticStyle:{color:"white","background-color":"#2d8cf0","font-weight":"bold","font-size":"17px"},attrs:{size:"large"}},[e._v("\n          "+e._s(e.userName.slice(0,1).toUpperCase())+"\n        ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapsed,expression:"!isCollapsed"}],staticStyle:{display:"block",margin:"7px","font-size":"15px",color:"white"}},[e._v(e._s(e.userName))])],1),a("Menu",{class:e.menuitemClasses,attrs:{"active-name":e.nowMenuItem,"open-names":e.openItems,theme:"dark",width:"auto",accordion:""},on:{"on-select":e.onSelect}},[e._l(e.menuItems,function(t){return[t.children?a("Submenu",{key:t.name,attrs:{name:"menu-"+t.name}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:t.icon}}),a("span",[e._v(e._s(t.text))])],1),e._l(t.children,function(t){return a("MenuItem",{key:t.name,style:{paddingLeft:"24px"},attrs:{name:"menu-"+t.name,to:e.$route.matched[0].path+"/"+t.name}},[a("Icon",{attrs:{type:t.icon}}),a("span",[e._v(e._s(t.text))])],1)})],2):a("MenuItem",{key:t.name,attrs:{name:"menu-"+t.name,to:e.$route.matched[0].path+"/"+t.name}},[a("Icon",{attrs:{type:t.icon}}),a("span",[e._v(e._s(t.text))])],1)]})],2)],1),a("Layout",[a("Header",{staticClass:"layout-header-bar",style:{padding:0}},[a("Icon",{class:e.rotateIcon,style:{margin:"0 20px"},attrs:{type:"md-menu",size:"24"},nativeOn:{click:function(t){return e.collapsedSider(t)}}}),a("div",{staticClass:"layout-header-title"},[e._v("\n          课程学习中心\n        ")])],1),a("Content",{style:{margin:"20px",background:"#fff",minHeight:"580px"}},[e._t("default")],2)],1)],1)],1)},n=[],s=(a("7f7f"),{props:{userName:{type:String,default:"test"},menuItems:{type:Array,default:function(){return[{text:"Option 1",icon:"ios-navigate"},{text:"Option 2",icon:"ios-search"},{text:"Option 3",icon:"ios-settings"}]}}},data:function(){return{isCollapsed:!1,curMenuItem:"",openItems:["menu-resource"]}},computed:{rotateIcon:function(){return["menu-icon",this.isCollapsed?"rotate-icon":""]},menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]},nowMenuItem:function(){return""===this.curMenuItem?"menu-".concat(this.$route.name):this.curMenuItem}},methods:{collapsedSider:function(){this.$refs.side1.toggleCollapse()},onSelect:function(e){this.curMenuItem=e}}}),r=s,i=(a("d047"),a("2877")),l=Object(i["a"])(r,o,n,!1,null,"4c538355",null);l.options.__file="Layout.vue";t["a"]=l.exports}}]);
//# sourceMappingURL=user.86dc0e82.js.map